import{C as t,S as e,i as s,s as a,e as n,t as r,k as c,J as i,c as o,a as l,g as u,d as f,n as h,K as d,b as p,f as v,H as g,h as m,l as E,I as w,L as b,M as y,A,N as k,O as S}from"../chunks/vendor-25a3256d.js";import{s as _,t as x}from"../chunks/timeAgo-82312b13.js";const T=t([]);function $(t,e,s){const a=t.slice();return a[6]=e[s],a[8]=s,a}function H(t){let e,s,a,E,w,b,y,A,k,S,_,T,$=t[6].title+"",H=t[6].content.substring(0,80)+"",I=x(t[6].updated_at)+"";return{c(){e=n("a"),s=n("h2"),a=r($),E=c(),w=n("p"),b=new i,y=r("..."),A=c(),k=n("i"),S=r(I),_=c(),this.h()},l(t){e=o(t,"A",{class:!0,href:!0,"sveltekit:prefetch":!0});var n=l(e);s=o(n,"H2",{});var r=l(s);a=u(r,$),r.forEach(f),E=h(n),w=o(n,"P",{});var c=l(w);b=d(c),y=u(c,"..."),c.forEach(f),A=h(n),k=o(n,"I",{class:!0});var i=l(k);S=u(i,I),i.forEach(f),_=h(n),n.forEach(f),this.h()},h(){b.a=y,p(k,"class","time svelte-3gdppa"),p(e,"class","article svelte-3gdppa"),p(e,"href",T=`/articles/${t[6].id}`),p(e,"sveltekit:prefetch","")},m(t,n){v(t,e,n),g(e,s),g(s,a),g(e,E),g(e,w),b.m(H,w),g(w,y),g(e,A),g(e,k),g(k,S),g(e,_)},p(t,s){1&s&&$!==($=t[6].title+"")&&m(a,$),1&s&&H!==(H=t[6].content.substring(0,80)+"")&&b.p(H),1&s&&I!==(I=x(t[6].updated_at)+"")&&m(S,I),1&s&&T!==(T=`/articles/${t[6].id}`)&&p(e,"href",T)},d(t){t&&f(e)}}}function I(t){let e,s,a,i,d=t[0],p=[];for(let n=0;n<d.length;n+=1)p[n]=H($(t,d,n));return{c(){e=n("h1"),s=r("Articles"),a=c();for(let t=0;t<p.length;t+=1)p[t].c();i=E()},l(t){e=o(t,"H1",{});var n=l(e);s=u(n,"Articles"),n.forEach(f),a=h(t);for(let e=0;e<p.length;e+=1)p[e].l(t);i=E()},m(t,n){v(t,e,n),g(e,s),v(t,a,n);for(let e=0;e<p.length;e+=1)p[e].m(t,n);v(t,i,n)},p(t,[e]){if(1&e){let s;for(d=t[0],s=0;s<d.length;s+=1){const a=$(t,d,s);p[s]?p[s].p(a,e):(p[s]=H(a),p[s].c(),p[s].m(i.parentNode,i))}for(;s<p.length;s+=1)p[s].d(1);p.length=d.length}},i:w,o:w,d(t){t&&f(e),t&&f(a),b(p,t),t&&f(i)}}}let N=[];async function P(){return await _.from("articles").select("*").order("updated_at",{ascending:!1}).then((t=>N=t.data)),{props:{artics:N}}}function j(t,e,s){let a;y(t,T,(t=>s(0,a=t)));var n=this&&this.__awaiter||function(t,e,s,a){return new(s||(s=Promise))((function(n,r){function c(t){try{o(a.next(t))}catch(e){r(e)}}function i(t){try{o(a.throw(t))}catch(e){r(e)}}function o(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(c,i)}o((a=a.apply(t,e||[])).next())}))};let{artics:r}=e;T.update((()=>r));const c=_.from("articles"),i=()=>c.on("*",(t=>{console.log(t),T.update((e=>function(t,e){switch(t.eventType){case"UPDATE":return e.map((e=>e.id===t.new.id?t.new:e));case"DELETE":return e.filter((e=>e.id!=t.old.id));case"INSERT":return[t.new,...e]}}(t,e)))}));return A((()=>n(void 0,void 0,void 0,(function*(){T.update((()=>(console.log("on mount!"),r)));const t=_.getSubscriptions();yield t.forEach((t=>_.removeSubscription(t))),S(),i().subscribe()})))),k((()=>_.removeSubscription(i))),t.$$set=t=>{"artics"in t&&s(1,r=t.artics)},[a,r]}class D extends e{constructor(t){super(),s(this,t,j,I,a,{artics:1})}}export{D as default,P as load};
